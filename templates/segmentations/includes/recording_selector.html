<!-- Debug Visualization Modal -->
<div class="modal fade" id="vizModal" tabindex="-1" aria-labelledby="vizModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="vizModalLabel">Segmentation Debug Visualization</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body text-center">
                <img id="vizImage" src="" alt="Debug Visualization" class="img-fluid">
                <p class="text-muted mt-3">
                    This visualization shows the segmentation process steps: 
                    original signal, absolute signal, smoothed signal with threshold, 
                    and binary mask with detected segments.
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <a id="vizDownloadLink" href="" download class="btn btn-primary">
                    <span class="fas fa-download me-1"></span> Download Image
                </a>
            </div>
        </div>
    </div>
</div>

<div id="segmentation-jobs-container">
    <div class="text-center py-4" id="loading-jobs">
        <div class="spinner-grow text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2">Loading segmentations...</p>
    </div>
    
    <div id="jobs-content" style="display: none;">
        <div class="table-responsive" id="jobs-table" style="display: none;">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>Recording</th>
                        <th>Segmentation</th>
                        <th>Started</th>
                        <th>Status</th>
                        <th>Segments</th>
                        <th>Progress</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="jobs-list">
                    <!-- Jobs will be loaded here dynamically -->
                </tbody>
            </table>
        </div>
        
        <div id="no-jobs-message" style="display: none;">
            <div class="text-center p-5">
                <span class="fas fa-scissors icon mb-3 d-block" style="font-size: 3rem; color: #ddd;"></span>
                <h4>No Segmentations</h4>
                <p class="text-muted">You haven't created any segmentations yet.</p>
                <a href="{% url 'battycoda_app:select_recording_for_segmentation' %}" class="btn btn-primary mt-2">
                    <span class="fas fa-plus me-1"></span> New Segmentation Run
                </a>
            </div>
        </div>
        
        <div id="error-message" style="display: none;">
            <!-- Error message will be displayed here -->
        </div>
    </div>
</div>
